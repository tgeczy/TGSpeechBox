settings:
  legacyPitchMode: false

  # Hungarian stress is fixed (word-initial) and is less "English-like" in timing.
  # Keep this very subtle so short vs long vowel length contrast stays clear.
  primaryStressDiv: 1.10
  secondaryStressDiv: 1.00

  # Make sure ː actually creates a clear long/short contrast in Hungarian.
  # (We set both the generic and HU compat keys so whichever path the frontend uses, it behaves.)
  lengthenedScale: 1.40
  # Length contrast + gemination (Hungarian has phonemic length)
  lengthContrastEnabled: true
  lengthContrastShortVowelCeilingMs: 90
  lengthContrastLongVowelFloorMs: 100
  lengthContrastGeminateClosureScale: 1.85
  lengthContrastGeminateReleaseScale: 0.9
  lengthContrastPreGeminateVowelScale: 0.88

  lengthenedScaleHu: 1.40
  lengthenedVowelFinalCodaScale: 0.90
  applyLengthenedScaleToVowelsOnly: false
  # Hungarian occlusives are often softer; avoid clickiness:
  stopClosureMode: always
  stopClosureAfterNasalsEnabled: true
  stopClosureVowelGapMs: 30.0
  stopClosureVowelFadeMs: 7.0
  stopClosureClusterGapMs: 24.0
  stopClosureClusterFadeMs: 5.0

  trillModulationMs: 30.0
  trillModulationFadeMs: 0.0

  # Hungarian short "a" timing helper (legacy compat)
  huShortAVowelEnabled: true
  huShortAVowelKey: "ᴒ"
  huShortAVowelScale: 0.85

  phraseFinalLengtheningNucleusOnlyMode: false
  phraseFinalLengtheningEnabled: false
  coarticulationVelarPinchEnabled: false
  coarticulationFadeIntoConsonants: false
  coarticulationEnabled: false
  microprosodyEnabled: true
  microprosodyVoicelessF0RaiseEnabled: false
  microprosodyVoicedF0LowerEnabled: true
  microprosodyVoicedF0LowerHz: -8.0
  nasalizationAnticipatoryEnabled: false
  positionalAllophonesGlottalReinforcementEnabled: false
  autoTieDiphthongs: false
  liquidDynamicsEnabled: false
  # Single-word utterance smoothing (key echo / word-by-word navigation)
  singleWordTuningEnabled: true
  singleWordFinalHoldMs: 45
  singleWordFinalFadeMs: 18
  singleWordClauseTypeOverride: "."
  singleWordClauseTypeOverrideCommaOnly: true

normalization:
  preReplacements:
    - from: "aː"
      to: "áː"
    - from: "eː"
      to: "éː"
    - from: "iː"
      to: "íː"
    - from: "oː"
      to: "óː"
    - from: "øː"
      to: "őː"
    - from: "uː"
      to: "úː"
    - from: "yː"
      to: "űː"

    # Hungarian short "a" is more /ɒ/ than /ɑ/ for many speakers.
    - from: "ɑ"
      to: "ᴒ"

    
    - from: "ɒ"
      to: "ᴒ"
    # Hungarian "ny" is /ɲ/ (palatal nasal). Some eSpeak tables emit it as nʲ or n͡ʲ.
    # Collapse those to /ɲ/ so the palatal quality doesn't disappear.
    - from: "n͡ʲ"
      to: "ɲ"
    - from: "nʲ"
      to: "ɲ"
    # Use the Hungarian-tuned palatal nasal variant.
    - from: "ɲ"
      to: "ɲ"

    # Safety: if a palatalization marker sneaks in, map it to our internal marker.
    - from: "ʲ"
      to: ""

    # If the palatal marker is already converted (n), fold it too.
    - from: "n͡"
      to: "ɲ"
    - from: "n"
      to: "ɲ"

    

    # Hungarian "gy" (/ɟ/) is word-initially stressed.
    # The frontend skips inserting stop-closure gaps for stressed consonants, which can make initial /ɟ/ vanish ("György" -> "örgy").
    # Move the stress mark AFTER the consonant so /ɟ/ still gets a stop-closure gap, but the following vowel carries the stress.
    - from: "ˈɟ"
      to:   "ɟˈ"
      when:
        atWordStart: true
    - from: "ˈd͡ʑ"
      to:   "d͡ʑˈ"
      when:
        atWordStart: true

    # Hungarian doesn't meaningfully use secondary stress in this pipeline; strip it.
    - from: "ˌ"
      to: ""
  replacements:
    # In long compounds, the final "jel" can get overly reduced (e.g. "felkiáltójel").
    # Add a light secondary stress so the final syllable stays audible without turning it Englishy.
    - from: "jɛl"
      to: "jˌɛl"
      when:
        atWordEnd: true

intonation:
  ".":
    # Hungarian declaratives: make the final fall clearer (helps even when stress marks are sparse).
    preHeadStart: 70
    preHeadEnd: 30
    nucleus0Start: 68
    nucleus0End: 0
    nucleusStart: 72
    nucleusEnd: 14
    tailStart: 22
    tailEnd: 0
