# Spanish.

settings:
  primaryStressDiv: 1.25
  secondaryStressDiv: 1.07

  # Stop closure - use "always" for Spanish to ensure clear consonants
  # and prevent final taps from being swallowed (e.g. "abrir paréntesis").
  # Increased gaps for better consonant separation.
  stopClosureMode: always
  stopClosureVowelGapMs: 24
  stopClosureVowelFadeMs: 6
  stopClosureClusterGapMs: 22
  stopClosureClusterFadeMs: 5
  stopClosureWordBoundaryClusterGapMs: 26
  stopClosureWordBoundaryClusterFadeMs: 5
  
  segmentBoundaryGapMs: 20
  segmentBoundaryFadeMs: 6

  # Boundary smoothing disabled - we want crisp consonants
  boundarySmoothing:
    enabled: false

  # Trill modulation (rolled R). Applied only when the phoneme has _isTrill: true.
  trillModulationMs: 52
  trillModulationFadeMs: 2

  # Single-word utterance smoothing (key echo / word-by-word navigation)
  singleWordTuningEnabled: true
  singleWordFinalHoldMs: 45
  singleWordFinalFadeMs: 18
  singleWordClauseTypeOverride: "."
  singleWordClauseTypeOverrideCommaOnly: true

# Spanish pure vowels - monophthongs without English-style diphthongization.
# These override the base phonemes.yaml values for Spanish.
  spellingDiphthongMode: none
  stopClosureAfterNasalsEnabled: false
  segmentBoundarySkipVowelToLiquid: false
  postStopAspirationEnabled: false
  coarticulationEnabled: false
  coarticulationFadeIntoConsonants: false
  coarticulationVelarPinchEnabled: false
  coarticulationGraduated: false
  coarticulationAdjacencyMaxConsonants: 2
  phraseFinalLengtheningEnabled: false
  phraseFinalLengtheningNucleusOnlyMode: false
  microprosodyEnabled: false
  microprosodyVoicelessF0RaiseEnabled: false
  microprosodyVoicedF0LowerEnabled: false
  rateReductionEnabled: false
  nasalizationAnticipatoryEnabled: false
  liquidDynamics:
    enabled: false
  lengthContrast:
    enabled: false
  positionalAllophones:
    enabled: false
    glottalReinforcement:
      enabled: false
  trajectoryLimit:
    enabled: false
    applyAcrossWordBoundary: false
phonemes:
  e:
    _isVowel: true
    _isVoiced: true
    _isLiquid: false
    _isNasal: false
    _isStop: false
    cf1: 450
    cf2: 1850
    cf3: 2650
    cf4: 3300
    cf5: 3750
    cf6: 4900
    cb1: 80
    cb2: 90
    cb3: 160
    cb4: 250
    cb5: 200
    cb6: 1000
    cfN0: 250
    cfNP: 200
    cbN0: 100
    cbNP: 100
    caNP: 0
    pf1: 450
    pf2: 1850
    pf3: 2650
    pf4: 3300
    pf5: 3750
    pf6: 4900
    pb1: 75
    pb2: 110
    pb3: 200
    pb4: 250
    pb5: 200
    pb6: 1000
    pa1: 0
    pa2: 0
    pa3: 0
    pa4: 0
    pa5: 0
    pa6: 0
    parallelBypass: 0
    voiceAmplitude: 0.9
    aspirationAmplitude: 0
    fricationAmplitude: 0
  o:
    _isVowel: true
    _isVoiced: true
    _isLiquid: false
    _isNasal: false
    _isStop: false
    cf1: 480
    cf2: 950
    cf3: 2550
    cf4: 3300
    cf5: 3750
    cf6: 4900
    cb1: 85
    cb2: 80
    cb3: 150
    cb4: 250
    cb5: 200
    cb6: 1000
    cfN0: 250
    cfNP: 200
    cbN0: 100
    cbNP: 100
    caNP: 0
    pf1: 480
    pf2: 950
    pf3: 2550
    pf4: 3300
    pf5: 3750
    pf6: 4900
    pb1: 80
    pb2: 100
    pb3: 190
    pb4: 250
    pb5: 200
    pb6: 1000
    pa1: 0
    pa2: 0
    pa3: 0
    pa4: 0
    pa5: 0
    pa6: 0
    parallelBypass: 0
    voiceAmplitude: 0.9
    aspirationAmplitude: 0
    fricationAmplitude: 0

normalization:
  replacements:
    # Palatal nasal: some tables emit ñ as nʲ (or n͡ʲ). Map it to /ɲ/ so it doesn't collapse to plain /n/.
    - from: "n͡ʲ"
      to:   "ɲ"
    - from: "nʲ"
      to:   "ɲ"
    - from: "ɲʲ"
      to:   "ɲ"

    # eSpeak Spanish often emits "ʝ" for initial <y>/<ll> (e.g. "yo").
    # We have a dedicated ʝ phoneme; keep it.
    # If a voice uses the affricate ɟʝ, collapse it to ʝ to avoid an overly "hard" onset.
    - from: "ɟʝ"
      to:   "ʝ"

    # Separate ð+ɾ clusters (like "madre") so they don't blend together.
    # Insert a micro-schwa to give each consonant space.
    - from: "ðɾ"
      to:   "ðᵊɾ"