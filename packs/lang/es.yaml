# Spanish.

settings:
  primaryStressDiv: 1.25
  secondaryStressDiv: 1.07

  # Stop closure - use "always" for Spanish to ensure clear consonants
  # and prevent final taps from being swallowed (e.g. "abrir paréntesis").
  # Increased gaps for better consonant separation.
  stopClosureMode: always
  stopClosureVowelGapMs: 30
  stopClosureVowelFadeMs: 6
  stopClosureClusterGapMs: 30
  stopClosureClusterFadeMs: 5
  stopClosureWordBoundaryClusterGapMs: 36
  stopClosureWordBoundaryClusterFadeMs: 5
  
  segmentBoundaryGapMs: 20
  segmentBoundaryFadeMs: 6

  # Boundary smoothing disabled - we want crisp consonants
  boundarySmoothing:
    enabled: false

  # Trill modulation (rolled R). Applied only when the phoneme has _isTrill: true.
  trillModulationMs: 52
  trillModulationFadeMs: 2

  # Single-word utterance smoothing (key echo / word-by-word navigation)
  singleWordTuningEnabled: true
  singleWordFinalHoldMs: 45
  singleWordFinalFadeMs: 18
  singleWordClauseTypeOverride: "."
  singleWordClauseTypeOverrideCommaOnly: true

# Spanish pure vowels - monophthongs without English-style diphthongization.
# These override the base phonemes.yaml values for Spanish.
  spellingDiphthongMode: monophthong
  stopClosureAfterNasalsEnabled: false
  segmentBoundarySkipVowelToLiquid: false
  postStopAspirationEnabled: false
  coarticulationEnabled: false
  coarticulationFadeIntoConsonants: false
  coarticulationVelarPinchEnabled: false
  coarticulationGraduated: false
  coarticulationAdjacencyMaxConsonants: 2
  phraseFinalLengtheningEnabled: false
  phraseFinalLengtheningNucleusOnlyMode: false
  microprosodyEnabled: false
  microprosodyVoicelessF0RaiseEnabled: false
  microprosodyVoicedF0LowerEnabled: false
  rateReductionEnabled: false
  nasalizationAnticipatoryEnabled: false
  liquidDynamics:
    enabled: false
  lengthContrast:
    enabled: false
  positionalAllophones:
    enabled: false
    glottalReinforcement:
      enabled: false
  trajectoryLimit:
    enabled: false
    applyAcrossWordBoundary: false
  legacyPitchMode: espeak_style
phonemes:
  a:
    _isLiquid: false
    _isNasal: false
    _isStop: false
    _isVoiced: true
    _isVowel: true
    aspirationAmplitude: 0
    caNP: 0
    cb1: 116.6
    cb2: 76.5
    cb3: 178
    cb4: 250
    cb5: 200
    cb6: 1000
    cbN0: 100
    cbNP: 100
    cf1: 750
    cf2: 1400
    cf3: 2500
    cf4: 3300
    cf5: 3750
    cf6: 4900
    cfN0: 250
    cfNP: 200
    fricationAmplitude: 0
    pa1: 0
    pa2: 0
    pa3: 0
    pa4: 0
    pa5: 0
    pa6: 0
    parallelBypass: 0
    pb1: 130
    pb2: 70
    pb3: 160
    pb4: 250
    pb5: 200
    pb6: 1000
    pf1: 750
    pf2: 1400
    pf3: 2500
    pf4: 3300
    pf5: 3750
    pf6: 4900
    voiceAmplitude: 0.9
  e:
    _isVowel: true
    _isVoiced: true
    _isLiquid: false
    _isNasal: false
    _isStop: false
    cf1: 450
    cf2: 1850
    cf3: 2650
    cf4: 3300
    cf5: 3750
    cf6: 4900
    cb1: 80
    cb2: 90
    cb3: 160
    cb4: 250
    cb5: 200
    cb6: 1000
    cfN0: 250
    cfNP: 200
    cbN0: 100
    cbNP: 100
    caNP: 0
    pf1: 450
    pf2: 1850
    pf3: 2650
    pf4: 3300
    pf5: 3750
    pf6: 4900
    pb1: 75
    pb2: 110
    pb3: 200
    pb4: 250
    pb5: 200
    pb6: 1000
    pa1: 0
    pa2: 0
    pa3: 0
    pa4: 0
    pa5: 0
    pa6: 0
    parallelBypass: 0
    voiceAmplitude: 0.9
    aspirationAmplitude: 0
    fricationAmplitude: 0
  "ɛ":
    _isLiquid: false
    _isNasal: false
    _isStop: false
    _isVoiced: true
    _isVowel: true
    aspirationAmplitude: 0
    caNP: 0
    cb1: 90
    cb2: 110
    cb3: 170
    cb4: 250
    cb5: 200
    cb6: 1000
    cbN0: 100
    cbNP: 100
    cf1: 490
    cf2: 1900
    cf3: 2600
    cf4: 3200
    cf5: 3750
    cf6: 4900
    cfN0: 250
    cfNP: 200
    fricationAmplitude: 0
    pa1: 0
    pa2: 0
    pa3: 0
    pa4: 0
    pa5: 0
    pa6: 0
    parallelBypass: 0
    pb1: 90
    pb2: 110
    pb3: 170
    pb4: 250
    pb5: 200
    pb6: 1000
    pf1: 490
    pf2: 1900
    pf3: 2600
    pf4: 3300
    pf5: 3750
    pf6: 4900
    voiceAmplitude: 0.9
  o:
    _isVowel: true
    _isVoiced: true
    _isLiquid: false
    _isNasal: false
    _isStop: false
    cf1: 480
    cf2: 950
    cf3: 2550
    cf4: 3300
    cf5: 3750
    cf6: 4900
    cb1: 85
    cb2: 80
    cb3: 150
    cb4: 250
    cb5: 200
    cb6: 1000
    cfN0: 250
    cfNP: 200
    cbN0: 100
    cbNP: 100
    caNP: 0
    pf1: 480
    pf2: 950
    pf3: 2550
    pf4: 3300
    pf5: 3750
    pf6: 4900
    pb1: 80
    pb2: 100
    pb3: 190
    pb4: 250
    pb5: 200
    pb6: 1000
    pa1: 0
    pa2: 0
    pa3: 0
    pa4: 0
    pa5: 0
    pa6: 0
    parallelBypass: 0
    voiceAmplitude: 0.9
    aspirationAmplitude: 0
    fricationAmplitude: 0
  "ɪ":
    _isLiquid: false
    _isNasal: false
    _isSemivowel: true
    _isStop: false
    _isVoiced: true
    _isVowel: false
    aspirationAmplitude: 0
    caNP: 0
    cb1: 55
    cb2: 75
    cb3: 105
    cb4: 250
    cb5: 200
    cb6: 1000
    cbN0: 100
    cbNP: 100
    cf1: 300
    cf2: 2200
    cf3: 3000
    cf4: 3300
    cf5: 3750
    cf6: 4900
    cfN0: 250
    cfNP: 200
    fricationAmplitude: 0
    pa1: 0
    pa2: 0
    pa3: 0
    pa4: 0
    pa5: 0
    pa6: 0
    parallelBypass: 0
    pb1: 50
    pb2: 100
    pb3: 140
    pb4: 250
    pb5: 200
    pb6: 1000
    pf1: 400
    pf2: 1800
    pf3: 2570
    pf4: 3300
    pf5: 3750
    pf6: 4900
    voiceAmplitude: 0.9
  U:
    _isLiquid: false
    _isNasal: false
    _isStop: false
    _isVoiced: true
    _isVowel: true
    aspirationAmplitude: 0
    caNP: 0
    cb1: 88
    cb2: 75
    cb3: 60
    cb4: 250
    cb5: 200
    cb6: 1000
    cbN0: 100
    cbNP: 100
    cf1: 405
    cf2: 900
    cf3: 2420
    cf4: 3300
    cf5: 3750
    cf6: 4900
    cfN0: 250
    cfNP: 200
    fricationAmplitude: 0
    pa1: 0
    pa2: 0
    pa3: 0
    pa4: 0
    pa5: 0
    pa6: 0
    parallelBypass: 0
    pb1: 80
    pb2: 100
    pb3: 80
    pb4: 250
    pb5: 200
    pb6: 1000
    pf1: 450
    pf2: 1100
    pf3: 2350
    pf4: 3300
    pf5: 3750
    pf6: 4900
    voiceAmplitude: 0.9
  u:
    _isLiquid: false
    _isNasal: false
    _isStop: false
    _isVoiced: true
    _isVowel: true
    aspirationAmplitude: 0
    caNP: 0
    cb1: 71.5
    cb2: 82.5
    cb3: 105
    cb4: 250
    cb5: 200
    cb6: 1000
    cbN0: 100
    cbNP: 100
    cf1: 300
    cf2: 780
    cf3: 2600
    cf4: 3300
    cf5: 3750
    cf6: 4900
    cfN0: 250
    cfNP: 200
    fricationAmplitude: 0
    pa1: 0
    pa2: 0
    pa3: 0
    pa4: 0
    pa5: 0
    pa6: 0
    parallelBypass: 0
    pb1: 65
    pb2: 110
    pb3: 140
    pb4: 250
    pb5: 200
    pb6: 1000
    pf1: 350
    pf2: 900
    pf3: 2200
    pf4: 3300
    pf5: 3750
    pf6: 4900
    voiceAmplitude: 0.9
  "t͡ʃ":
    _isAfricate: true
    _isLiquid: false
    _isNasal: false
    _isStop: false
    _isVoiced: false
    _isVowel: false
    aspirationAmplitude: 0
    caNP: 0
    cb1: 220
    cb2: 75
    cb3: 225
    cb4: 400
    cb5: 700
    cb6: 1500
    cbN0: 100
    cbNP: 100
    cf1: 500
    cf2: 2180
    cf3: 3100
    cf4: 3300
    cf5: 3750
    cf6: 4900
    cfN0: 250
    cfNP: 200
    fricationAmplitude: 0.9
    pa1: 0
    pa2: 0.15
    pa3: 0.52
    pa4: 0.45
    pa5: 0.35
    pa6: 0.33
    parallelBypass: 0
    pb1: 200
    pb2: 100
    pb3: 350
    pb4: 400
    pb5: 700
    pb6: 1500
    pf1: 300
    pf2: 1840
    pf3: 2750
    pf4: 3300
    pf5: 3750
    pf6: 4900
    voiceAmplitude: 0
  "ʎ":
    _isLiquid: true
    _isNasal: false
    _isStop: false
    _isVoiced: true
    _isVowel: false
    aspirationAmplitude: 0
    caNP: 0
    cb1: 55
    cb2: 120
    cb3: 210
    cb4: 300
    cb5: 350
    cb6: 1300
    cbN0: 100
    cbNP: 100
    cf1: 300
    cf2: 2200
    cf3: 3100
    cf4: 3300
    cf5: 3750
    cf6: 4900
    cfN0: 250
    cfNP: 200
    fricationAmplitude: 0
    pa1: 0
    pa2: 0
    pa3: 0
    pa4: 0
    pa5: 0
    pa6: 0
    parallelBypass: 0
    pb1: 50
    pb2: 150
    pb3: 280
    pb4: 300
    pb5: 350
    pb6: 1300
    pf1: 300
    pf2: 2200
    pf3: 3100
    pf4: 3300
    pf5: 3750
    pf6: 4900
    voiceAmplitude: 0.9
    frameEx:
      breathiness: 0.15
  x:
    _isAfricate: false
    _isLiquid: false
    _isNasal: false
    _isStop: false
    _isVoiced: false
    _isVowel: false
    aspirationAmplitude: 0.45
    caNP: 0
    cb1: 160
    cb2: 180
    cb3: 250
    cb4: 500
    cb5: 1000
    cb6: 1800
    cbN0: 100
    cbNP: 100
    cf1: 250
    cf2: 1400
    cf3: 2600
    cf4: 3300
    cf5: 3750
    cf6: 4900
    cfN0: 250
    cfNP: 200
    fricationAmplitude: 0.80
    pa1: 0.05
    pa2: 1.0
    pa3: 0.40
    pa4: 0.40
    pa5: 0
    pa6: 0.25
    parallelBypass: 0
    pb1: 130
    pb2: 160
    pb3: 220
    pb4: 500
    pb5: 1000
    pb6: 1980
    pf1: 400
    pf2: 1050
    pf3: 2400
    pf4: 3300
    pf5: 3750
    pf6: 4900
    voiceAmplitude: 0
  k:
    _isLiquid: false
    _isNasal: false
    _isStop: true
    _isVoiced: false
    _isVowel: false
    aspirationAmplitude: 0.00
    caNP: 0
    cb1: 275
    cb2: 120
    cb3: 200
    cb4: 450
    cb5: 800
    cb6: 1500
    cbN0: 100
    cbNP: 100
    cf1: 300
    cf2: 2100
    cf3: 2500
    cf4: 3300
    cf5: 3750
    cf6: 4900
    cfN0: 250
    cfNP: 200
    fricationAmplitude: 0.75
    pa1: 0.03
    pa2: 0.50
    pa3: 0.95
    pa4: 0.25
    pa5: 0.10
    pa6: 0.05
    parallelBypass: 0.3
    pb1: 250
    pb2: 130
    pb3: 200
    pb4: 450
    pb5: 1040
    pb6: 2100
    pf1: 300
    pf2: 1800
    pf3: 2400
    pf4: 3300
    pf5: 3200
    pf6: 4200
    voiceAmplitude: 0
  "ɣ":
    _isAfricate: false
    _isLiquid: false
    _isNasal: false
    _isStop: false
    _isVoiced: true
    _isVowel: false
    aspirationAmplitude: 0
    caNP: 0
    cb1: 100
    cb2: 130
    cb3: 180
    cb4: 500
    cb5: 1000
    cb6: 1800
    cbN0: 100
    cbNP: 100
    cf1: 550
    cf2: 1200
    cf3: 1500
    cf4: 3300
    cf5: 3750
    cf6: 4900
    cfN0: 250
    cfNP: 200
    fricationAmplitude: 0.20
    pa1: 0.1
    pa2: 0.05
    pa3: 0.1
    pa4: 0.1
    pa5: 0
    pa6: 0
    parallelBypass: 0
    pb1: 90
    pb2: 140
    pb3: 190
    pb4: 500
    pb5: 1000
    pb6: 1800
    pf1: 640
    pf2: 2000
    pf3: 1100
    pf4: 3300
    pf5: 3750
    pf6: 4900
    voiceAmplitude: 0.4
  l:
    _isLiquid: true
    _isNasal: false
    _isStop: false
    _isVoiced: true
    _isVowel: false
    aspirationAmplitude: 0
    caNP: 0
    cb1: 55
    cb2: 75
    cb3: 210
    cb4: 300
    cb5: 350
    cb6: 1300
    cbN0: 100
    cbNP: 100
    cf1: 350
    cf2: 1400
    cf3: 2600
    cf4: 3400
    cf5: 3300
    cf6: 4900
    cfN0: 250
    cfNP: 200
    fricationAmplitude: 0
    pa1: 0
    pa2: 0
    pa3: 0
    pa4: 0
    pa5: 0
    pa6: 0
    parallelBypass: 0
    pb1: 50
    pb2: 100
    pb3: 280
    pb4: 300
    pb5: 350
    pb6: 1300
    pf1: 310
    pf2: 1050
    pf3: 2880
    pf4: 3300
    pf5: 3750
    pf6: 4900
    voiceAmplitude: 0.9
  m:
    _isLiquid: false
    _isNasal: true
    _isStop: false
    _isVoiced: true
    _isVowel: false
    aspirationAmplitude: 0
    caNP: 0.75
    cb1: 50
    cb2: 100
    cb3: 120
    cb4: 300
    cb5: 350
    cb6: 1300
    cbN0: 80
    cbNP: 180
    cf1: 230
    cf2: 1000
    cf3: 2500
    cf4: 3300
    cf5: 3750
    cf6: 4900
    cfN0: 700
    cfNP: 400
    fricationAmplitude: 0
    pa1: 0
    pa2: 0
    pa3: 0
    pa4: 0
    pa5: 0
    pa6: 0
    parallelBypass: 0
    pb1: 40
    pb2: 170
    pb3: 170
    pb4: 300
    pb5: 350
    pb6: 1300
    pf1: 430
    pf2: 850
    pf3: 2050
    pf4: 3300
    pf5: 3750
    pf6: 4900
    voiceAmplitude: 1.0
  n:
    _isLiquid: false
    _isNasal: true
    _isStop: false
    _isVoiced: true
    _isVowel: false
    aspirationAmplitude: 0
    caNP: 1.5
    cb1: 75
    cb2: 260
    cb3: 225
    cb4: 300
    cb5: 350
    cb6: 1300
    cbN0: 100
    cbNP: 150
    cf1: 280
    cf2: 1550
    cf3: 2740
    cf4: 3300
    cf5: 3750
    cf6: 4900
    cfN0: 400
    cfNP: 375
    fricationAmplitude: 0
    pa1: 0
    pa2: 0
    pa3: 0
    pa4: 0
    pa5: 0
    pa6: 0
    parallelBypass: 0
    pb1: 40
    pb2: 300
    pb3: 300
    pb4: 300
    pb5: 350
    pb6: 1300
    pf1: 480
    pf2: 1550
    pf3: 2600
    pf4: 3300
    pf5: 3750
    pf6: 4900
    voiceAmplitude: 1.0
  s:
    _isLiquid: false
    _isNasal: false
    _isStop: false
    _isVoiced: false
    _isVowel: false
    aspirationAmplitude: 0
    caNP: 0
    cb1: 220
    cb2: 60
    cb3: 150
    cb4: 350
    cb5: 500
    cb6: 1500
    cbN0: 100
    cbNP: 100
    cf1: 320
    cf2: 1390
    cf3: 2530
    cf4: 3300
    cf5: 3750
    cf6: 4900
    cfN0: 250
    cfNP: 200
    fricationAmplitude: 0.9
    pa1: 0
    pa2: 0
    pa3: 0
    pa4: 0.1
    pa5: 0.9
    pa6: 0.1
    parallelBypass: 0
    pb1: 200
    pb2: 80
    pb3: 200
    pb4: 350
    pb5: 500
    pb6: 1815
    pf1: 320
    pf2: 1390
    pf3: 2530
    pf4: 3300
    pf5: 3750
    pf6: 5250
    voiceAmplitude: 0
  d:
    _isLiquid: false
    _isNasal: false
    _isStop: true
    _isVoiced: false
    _isVowel: false
    aspirationAmplitude: 0
    caNP: 0
    cb1: 66
    cb2: 75
    cb3: 127.5
    cb4: 350
    cb5: 500
    cb6: 1500
    cbN0: 100
    cbNP: 100
    cf1: 170
    cf2: 1450
    cf3: 2250
    cf4: 3600
    cf5: 3750
    cf6: 4900
    cfN0: 250
    cfNP: 200
    fricationAmplitude: 0.25
    pa1: 0
    pa2: 0.25
    pa3: 0.25
    pa4: 0
    pa5: 0
    pa6: 0.75
    parallelBypass: 0
    pb1: 60
    pb2: 100
    pb3: 170
    pb4: 350
    pb5: 500
    pb6: 1500
    pf1: 200
    pf2: 1600
    pf3: 2600
    pf4: 3300
    pf5: 3750
    pf6: 4900
    voiceAmplitude: 1.0
  j:
    _isLiquid: false
    _isNasal: false
    _isSemivowel: true
    _isStop: false
    _isVoiced: true
    _isVowel: false
    aspirationAmplitude: 0
    caNP: 0
    cb1: 65
    cb2: 200
    cb3: 400
    cb4: 280
    cb5: 300
    cb6: 1200
    cbN0: 100
    cbNP: 100
    cf1: 300
    cf2: 2200
    cf3: 3000
    cf4: 3300
    cf5: 3750
    cf6: 4900
    cfN0: 250
    cfNP: 200
    fricationAmplitude: 0
    pa1: 0
    pa2: 0
    pa3: 0
    pa4: 0
    pa5: 0
    pa6: 0
    parallelBypass: 0
    pb1: 60
    pb2: 260
    pb3: 520
    pb4: 280
    pb5: 300
    pb6: 1200
    pf1: 290
    pf2: 2000
    pf3: 2920
    pf4: 3300
    pf5: 3750
    pf6: 4900
    voiceAmplitude: 0.9

normalization:
  classes:
    # Let's define vowels for furter pronounciation exceptions.
    VOWELS:
      - ˈ
      - a
      - e
      - i
      - o
      - u
  replacements:
    # Palatal nasal: some tables emit ñ as nʲ (or n͡ʲ). Map it to /ɲ/ so it doesn't collapse to plain /n/.
    - from: "n͡ʲ"
      to:   "ɲ"
    - from: "nʲ"
      to:   "ɲ"
    - from: "ɲʲ"
      to:   "ɲ"

    # eSpeak Spanish often emits "ʝ" for initial <y>/<ll> (e.g. "yo").
    # We have a dedicated ʝ phoneme; keep it.
    # If a voice uses the affricate ɟʝ, collapse it to ʝ to avoid an overly "hard" onset.
    - from: "ɟʝ"
      to:   "ʝ"

    # Separate β, ð+ɾ or other clusters (like "habrá" or "madre") so they don't blend together.
    # Insert a micro-schwa to give each consonant space.
    - from: "βɾ"
      to:   "βᵊɾ"
    - from: "ðɾ"
      to:   "ðᵊɾ"
    - from: "ɡɾ"
      to:   "ɡᵊɾ"
    - from: "ɣɾ"
      to:   "ɣᵊɾ"
    - from: "kɾ"
      to:   "kᵊɾ"
    - from: "pɾ"
      to:   "pᵊɾ"
    # Mark the proper "r" also in vowels, for example "para".
    - from: "ɾ"
      to:   "ᵊɾ"
      when:
        afterClass: VOWELS
    - from: "tɾ"
      to:   "tᵊɾ"
    # Set our own r trill r. The default one lacks naturalness.
    - from: "r"
      to:   "ɾᵊɾ"
    # Fix espeak's pronounciation mistakes like 'prueba', when 'u' is preceded by a vowel. That always should be 'w'
    - from: "u"
      to:   "w"
      when:
        beforeClass: VOWELS
    # G approximant. To improve clarity, let's convert into non-aproximant g at the start, example: muy grande.
    - from: "ɣ"
      to: "ɡ"
      when:
        atWordStart: true
