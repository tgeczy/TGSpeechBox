# Russian (ru)
#
# Cyrillic support built around eSpeak / eSpeak-ng IPA output.
#
# Russian characteristics:
# - Strong lexical stress with significant vowel reduction (аканье/иканье)
# - Palatalized (soft) vs non-palatalized (hard) consonant pairs
# - Dense consonant clusters (встретить, взгляд)
# - Rolled /r/ and palatalized /rʲ/

settings:
  # === STRESS & RHYTHM ===
  # Russian stress is very prominent - stressed syllables are notably longer
  # Unstressed vowels reduce significantly (especially /o/ → [ɐ], /e/ → [ɪ])
  primaryStressDiv: 1.40
  secondaryStressDiv: 1.12

  # === CONSONANT CLUSTERS ===
  # Russian has very dense clusters; keep gaps small to maintain flow
  stopClosureMode: vowel-and-cluster
  stopClosureClusterGapsEnabled: true
  stopClosureAfterNasalsEnabled: true

  # Tighter gaps than default - Russian clusters should flow
  stopClosureClusterGapMs: 14
  stopClosureClusterFadeMs: 3
  stopClosureVowelGapMs: 26
  stopClosureVowelFadeMs: 4

  # Word-boundary clusters need small gaps to stay intelligible
  stopClosureWordBoundaryClusterGapMs: 16
  stopClosureWordBoundaryClusterFadeMs: 3

  # === TRILLS ===
  # Russian has both /r/ and /rʲ/ (palatalized trill)
  trillModulationMs: 42
  trillModulationFadeMs: 2

  # === SMOOTHING ===
  boundarySmoothingEnabled: true

  # Single-word tuning for isolated words
  singleWordTuningEnabled: true
  singleWordFinalHoldMs: 40
  singleWordFinalFadeMs: 16

normalization:
  preReplacements:
    # Map IPA palatalization marker ʲ to internal key (U+E001) to avoid engine bug.
    - from: "ʲ"
      to: ""

    # Russian has no phonemic vowel length; strip any stray length marks.
    - from: "ː"
      to: ""

    # Some eSpeak tables output 'y' for Russian "ы" (should be ɨ).
    - from: "y"
      to: "ɨ"

    # Some voices emit retroflex lateral ɭ for dark-L; treat it as ɫ.
    - from: "ɭ"
      to: "ɫ"

    # eSpeak can emit doubled glides in a few contexts (e.g. семья).
    - from: "jj"
      to: "j"

  replacements:
    # Some eSpeak Russian outputs use ʌ as a reduced vowel. Map it closer to Slavic ɐ.
    - from: "ʌ"
      to: "ɐ"
